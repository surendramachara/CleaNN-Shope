!function(r){"use strict";r.rspike={getSub:function(){return void 0!==r.rs_acc_id?"rum-"+r.rs_acc_id:"results"},getId:function(){return void 0!==r.rs_rum_id?r.rs_rum_id:"unknown"},getAccountId:function(){return void 0!==r.rs_acc_id?r.rs_acc_id:"unknown"},getEndpointHost:function(){return"rapidspike.com"}},r.rspike_timing={getTimes:function(){if("performance"in r==!0){var n={};if("getEntriesByType"in r.performance==!0){var e=r.performance.getEntriesByType("navigation");if(e instanceof Array&&0<e.length&&e[0]instanceof PerformanceNavigationTiming)return n.loadTime=Math.round(e[0].loadEventEnd-e[0].fetchStart),n.network=Math.round(e[0].connectEnd-e[0].fetchStart),n.server=Math.round(e[0].responseEnd-e[0].requestStart),n.browser=Math.round(e[0].loadEventEnd-e[0].domInteractive),n.p="pnt",n}if("timing"in r.performance==!0){var o=r.performance.timing;if(o instanceof PerformanceTiming)return n.loadTime=o.loadEventEnd-o.fetchStart,n.network=o.connectEnd-o.fetchStart,n.server=o.responseEnd-o.requestStart,n.browser=o.loadEventEnd-o.domInteractive,n.p="pt",n}}return!1},getResources:function(){if("performance"in r==!0&&"getEntriesByType"in r.performance==!0){var n=r.performance.getEntriesByType("resource");if(n instanceof Array==!0){for(var e={},o=n.length,i=0;i<o;i++){var t=r.location.protocol+"//"+r.location.host;n[i]instanceof PerformanceResourceTiming&&"initiatorType"in n[i]&&t!==n[i].name.substr(0,t.length)&&(void 0===e[n[i].name]?e[n[i].name]=1:e[n[i].name]++)}return{objDataResources:e,totalResources:o}}}return!1}}}(window),"performance"in window&&"setResourceTimingBufferSize"in window.performance&&window.performance.setResourceTimingBufferSize(300),"navigator"in window&&"sendBeacon"in window.navigator&&window.navigator.sendBeacon?(window.addEventListener("load",function(){setTimeout(function(){try{var n,e=rspike_timing.getTimes(),o=new FormData;for(n in o.append("id",rspike.getId()),o.append("page",window.location.protocol+"//"+window.location.host+window.location.pathname),e)o.append(n,e[n]);window.navigator.sendBeacon("//"+rspike.getSub()+"."+rspike.getEndpointHost()+"/rum/",o)}catch(n){console.error(n.message)}},100)}),window.addEventListener("pagehide",function(){try{var n=rspike_timing.getResources(),e=n.objDataResources;if(e){var o=new FormData;if(o.append("aid",rspike.getAccountId()),o.append("id",rspike.getId()),o.append("pg",window.location.protocol+"//"+window.location.host+window.location.pathname),o.append("tr",n.totalResources),"JSON"in window&&"stringify"in window.JSON)o.append("dr",window.JSON.stringify(e));else{var i,t=[];for(i in e)e.hasOwnProperty(i)&&t.push('"'+i+'":'+e[i]);o.append("dr","{"+String(t)+"}")}window.navigator.sendBeacon("//"+rspike.getSub()+"."+rspike.getEndpointHost()+"/performance/",o)}}catch(n){console.error(n.message)}})):(window.addEventListener("load",function(){setTimeout(function(){var n,e=rspike_timing.getTimes(),o=new Image,i=[];for(n in i.push("id="+rspike.getId()),i.push("page="+encodeURIComponent(window.location.protocol+"//"+window.location.host+window.location.pathname)),e)i.push(n+"="+e[n]);o.src="//"+rspike.getSub()+"."+rspike.getEndpointHost()+"/rum/?"+i.join("&")},100)}),window.addEventListener("pagehide",function(){var n=rspike_timing.getResources(),e=n.objDataResources;if(e){var o=new Image,i=[];if(i.push("aid="+rspike.getAccountId()),i.push("id="+rspike.getId()),i.push("pg="+encodeURIComponent(window.location.protocol+"//"+window.location.host+window.location.pathname)),i.push("tr="+n.totalResources),"JSON"in window&&"stringify"in window.JSON)i.push("dr="+encodeURIComponent(JSON.stringify(e)));else{var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push('"'+t+'":'+e[t]);i.push("dr="+encodeURIComponent("{"+String(r)+"}"))}o.src="//"+rspike.getSub()+"."+rspike.getEndpointHost()+"/performance/?"+i.join("&")}}));